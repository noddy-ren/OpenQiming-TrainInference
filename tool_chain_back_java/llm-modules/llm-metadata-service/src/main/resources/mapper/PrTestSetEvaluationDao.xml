<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ctdi.cnos.llm.metadata.dao.PrTestSetEvaluationDao">

    <select id="queryByDeployTaskId" resultType="com.ctdi.cnos.llm.beans.meta.evaluation.PrTestSetEvaluationVO">
        select mptse.id, mprd.id as promptResponseDetailId,
               mprd.question_id as questionId , mprd.prompt , mprd.response
        from meta.mm_pr_test_set_evaluation mptse
                 inner join meta.mm_data_set mds on mds.id = mptse.data_set_id
                 inner join meta.mm_data_set_file mdsf on mdsf.save_path = mds.save_path
                 inner join meta.mm_prompt_response_detail mprd on mprd.data_set_file_id = mdsf.id
        where mptse.id = #{id}
    </select>
    <select id="queryPrTestSetEvaluationListBySendStatus" resultType="com.ctdi.cnos.llm.beans.meta.evaluation.PrTestSetEvaluation">
        select * from meta.mm_pr_test_set_evaluation
        where send_status = #{sendStatus}
        order by create_date asc
        limit #{limit}
    </select>
</mapper>